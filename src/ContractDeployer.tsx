import { useState } from "react";
import { ethers } from "ethers";
import { Analytics } from "@vercel/analytics/react"

import "./styles.css";
const simpleContractBytecode = "608060405234801561000f575f80fd5b506040518060400160405280600d81526020017f48656c6c6f2c20576f726c6421000000000000000000000000000000000000008152505f90816100539190610293565b50610362565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806100d457607f821691505b6020821081036100e7576100e6610090565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026101497fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261010e565b610153868361010e565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61019761019261018d8461016b565b610174565b61016b565b9050919050565b5f819050919050565b6101b08361017d565b6101c46101bc8261019e565b84845461011a565b825550505050565b5f90565b6101d86101cc565b6101e38184846101a7565b505050565b5b81811015610206576101fb5f826101d0565b6001810190506101e9565b5050565b601f82111561024b5761021c816100ed565b610225846100ff565b81016020851015610234578190505b610248610240856100ff565b8301826101e8565b50505b505050565b5f82821c905092915050565b5f61026b5f1984600802610250565b1980831691505092915050565b5f610283838361025c565b9150826002028217905092915050565b61029c82610059565b67ffffffffffffffff8111156102b5576102b4610063565b5b6102bf82546100bd565b6102ca82828561020a565b5f60209050601f8311600181146102fb575f84156102e9578287015190505b6102f38582610278565b86555061035a565b601f198416610309866100ed565b5f5b828110156103305784890151825560018201915060208501945060208101905061030b565b8683101561034d5784890151610349601f89168261025c565b8355505b6001600288020188555050505b505050505050565b6101f98061036f5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063e21f37ce1461002d575b5f80fd5b61003561004b565b6040516100429190610146565b60405180910390f35b5f805461005790610193565b80601f016020809104026020016040519081016040528092919081815260200182805461008390610193565b80156100ce5780601f106100a5576101008083540402835291602001916100ce565b820191905f5260205f20905b8154815290600101906020018083116100b157829003601f168201915b505050505081565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610118826100d6565b61012281856100e0565b93506101328185602086016100f0565b61013b816100fe565b840191505092915050565b5f6020820190508181035f83015261015e818461010e565b905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806101aa57607f821691505b6020821081036101bd576101bc610166565b5b5091905056fea264697066735822122062140d264ba03af15c8c00e77e2bca91b5fe9742b60c380b63891a2b49c8c30664736f6c634300081a0033";



const tokenContractBytecode = "608060405234801561000f575f80fd5b506040516118dc3803806118dc833981810160405281019061003191906104b7565b828281600390816100429190610743565b5080600490816100529190610743565b5050506100893361006761009160201b60201c565b600a610073919061097a565b8361007e91906109c4565b61009960201b60201c565b505050610aed565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610109575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101009190610a44565b60405180910390fd5b61011a5f838361011e60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016e578060025f8282546101629190610a5d565b9250508190555061023c565b5f805f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f7578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ee93929190610a9f565b60405180910390fd5b8181035f808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610283578060025f82825403925050819055506102cd565b805f808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032a9190610ad4565b60405180910390a3505050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039682610350565b810181811067ffffffffffffffff821117156103b5576103b4610360565b5b80604052505050565b5f6103c7610337565b90506103d3828261038d565b919050565b5f67ffffffffffffffff8211156103f2576103f1610360565b5b6103fb82610350565b9050602081019050919050565b8281835e5f83830152505050565b5f610428610423846103d8565b6103be565b9050828152602081018484840111156104445761044361034c565b5b61044f848285610408565b509392505050565b5f82601f83011261046b5761046a610348565b5b815161047b848260208601610416565b91505092915050565b5f819050919050565b61049681610484565b81146104a0575f80fd5b50565b5f815190506104b18161048d565b92915050565b5f805f606084860312156104ce576104cd610340565b5b5f84015167ffffffffffffffff8111156104eb576104ea610344565b5b6104f786828701610457565b935050602084015167ffffffffffffffff81111561051857610517610344565b5b61052486828701610457565b9250506040610535868287016104a3565b9150509250925092565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061058d57607f821691505b6020821081036105a05761059f610549565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026106027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826105c7565b61060c86836105c7565b95508019841693508086168417925050509392505050565b5f819050919050565b5f61064761064261063d84610484565b610624565b610484565b9050919050565b5f819050919050565b6106608361062d565b61067461066c8261064e565b8484546105d3565b825550505050565b5f90565b61068861067c565b610693818484610657565b505050565b5b818110156106b6576106ab5f82610680565b600181019050610699565b5050565b601f8211156106fb576106cc816105a6565b6106d5846105b8565b810160208510156106e4578190505b6106f86106f0856105b8565b830182610698565b50505b505050565b5f82821c905092915050565b5f61071b5f1984600802610700565b1980831691505092915050565b5f610733838361070c565b9150826002028217905092915050565b61074c8261053f565b67ffffffffffffffff81111561076557610764610360565b5b61076f8254610576565b61077a8282856106ba565b5f60209050601f8311600181146107ab575f8415610799578287015190505b6107a38582610728565b86555061080a565b601f1984166107b9866105a6565b5f5b828110156107e0578489015182556001820191506020850194506020810190506107bb565b868310156107fd57848901516107f9601f89168261070c565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f808291508390505b6001851115610894578086048111156108705761086f610812565b5b600185161561087f5780820291505b808102905061088d8561083f565b9450610854565b94509492505050565b5f826108ac5760019050610967565b816108b9575f9050610967565b81600181146108cf57600281146108d957610908565b6001915050610967565b60ff8411156108eb576108ea610812565b5b8360020a91508482111561090257610901610812565b5b50610967565b5060208310610133831016604e8410600b841016171561093d5782820a90508381111561093857610937610812565b5b610967565b61094a848484600161084b565b9250905081840481111561096157610960610812565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61098482610484565b915061098f8361096e565b92506109bc7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff848461089d565b905092915050565b5f6109ce82610484565b91506109d983610484565b92508282026109e781610484565b915082820484148315176109fe576109fd610812565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610a2e82610a05565b9050919050565b610a3e81610a24565b82525050565b5f602082019050610a575f830184610a35565b92915050565b5f610a6782610484565b9150610a7283610484565b9250828201905080821115610a8a57610a89610812565b5b92915050565b610a9981610484565b82525050565b5f606082019050610ab25f830186610a35565b610abf6020830185610a90565b610acc6040830184610a90565b949350505050565b5f602082019050610ae75f830184610a90565b92915050565b610de280610afa5f395ff3fe608060405234801561000f575f80fd5b5060043610610091575f3560e01c8063313ce56711610064578063313ce5671461013157806370a082311461014f57806395d89b411461017f578063a9059cbb1461019d578063dd62ed3e146101cd57610091565b806306fdde0314610095578063095ea7b3146100b357806318160ddd146100e357806323b872dd14610101575b5f80fd5b61009d6101fd565b6040516100aa9190610a5b565b60405180910390f35b6100cd60048036038101906100c89190610b0c565b61028d565b6040516100da9190610b64565b60405180910390f35b6100eb6102af565b6040516100f89190610b8c565b60405180910390f35b61011b60048036038101906101169190610ba5565b6102b8565b6040516101289190610b64565b60405180910390f35b6101396102e6565b6040516101469190610c10565b60405180910390f35b61016960048036038101906101649190610c29565b6102ee565b6040516101769190610b8c565b60405180910390f35b610187610333565b6040516101949190610a5b565b60405180910390f35b6101b760048036038101906101b29190610b0c565b6103c3565b6040516101c49190610b64565b60405180910390f35b6101e760048036038101906101e29190610c54565b6103e5565b6040516101f49190610b8c565b60405180910390f35b60606003805461020c90610cbf565b80601f016020809104026020016040519081016040528092919081815260200182805461023890610cbf565b80156102835780601f1061025a57610100808354040283529160200191610283565b820191905f5260205f20905b81548152906001019060200180831161026657829003601f168201915b5050505050905090565b5f80610297610467565b90506102a481858561046e565b600191505092915050565b5f600254905090565b5f806102c2610467565b90506102cf858285610480565b6102da858585610513565b60019150509392505050565b5f6012905090565b5f805f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461034290610cbf565b80601f016020809104026020016040519081016040528092919081815260200182805461036e90610cbf565b80156103b95780601f10610390576101008083540402835291602001916103b9565b820191905f5260205f20905b81548152906001019060200180831161039c57829003601f168201915b5050505050905090565b5f806103cd610467565b90506103da818585610513565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b61047b8383836001610603565b505050565b5f61048b84846103e5565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81101561050d57818110156104fe578281836040517ffb8f41b20000000000000000000000000000000000000000000000000000000081526004016104f593929190610cfe565b60405180910390fd5b61050c84848484035f610603565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610583575f6040517f96c6fd1e00000000000000000000000000000000000000000000000000000000815260040161057a9190610d33565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036105f3575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016105ea9190610d33565b60405180910390fd5b6105fe8383836107d2565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610673575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161066a9190610d33565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036106e3575f6040517f94280d620000000000000000000000000000000000000000000000000000000081526004016106da9190610d33565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208190555080156107cc578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516107c39190610b8c565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610822578060025f8282546108169190610d79565b925050819055506108f0565b5f805f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156108ab578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016108a293929190610cfe565b60405180910390fd5b8181035f808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610937578060025f8282540392505081905550610981565b805f808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516109de9190610b8c565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610a2d826109eb565b610a3781856109f5565b9350610a47818560208601610a05565b610a5081610a13565b840191505092915050565b5f6020820190508181035f830152610a738184610a23565b905092915050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610aa882610a7f565b9050919050565b610ab881610a9e565b8114610ac2575f80fd5b50565b5f81359050610ad381610aaf565b92915050565b5f819050919050565b610aeb81610ad9565b8114610af5575f80fd5b50565b5f81359050610b0681610ae2565b92915050565b5f8060408385031215610b2257610b21610a7b565b5b5f610b2f85828601610ac5565b9250506020610b4085828601610af8565b9150509250929050565b5f8115159050919050565b610b5e81610b4a565b82525050565b5f602082019050610b775f830184610b55565b92915050565b610b8681610ad9565b82525050565b5f602082019050610b9f5f830184610b7d565b92915050565b5f805f60608486031215610bbc57610bbb610a7b565b5b5f610bc986828701610ac5565b9350506020610bda86828701610ac5565b9250506040610beb86828701610af8565b9150509250925092565b5f60ff82169050919050565b610c0a81610bf5565b82525050565b5f602082019050610c235f830184610c01565b92915050565b5f60208284031215610c3e57610c3d610a7b565b5b5f610c4b84828501610ac5565b91505092915050565b5f8060408385031215610c6a57610c69610a7b565b5b5f610c7785828601610ac5565b9250506020610c8885828601610ac5565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610cd657607f821691505b602082108103610ce957610ce8610c92565b5b50919050565b610cf881610a9e565b82525050565b5f606082019050610d115f830186610cef565b610d1e6020830185610b7d565b610d2b6040830184610b7d565b949350505050565b5f602082019050610d465f830184610cef565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610d8382610ad9565b9150610d8e83610ad9565b9250828201905080821115610da657610da5610d4c565b5b9291505056fea2646970667358221220ebfef9fedfa032349e9c131a8f815dbeaac688bfdd312451677ba3237f6ece9064736f6c634300081a0033"; 
const nftContractBytecode = "608060405234801561000f575f80fd5b506040516123c13803806123c1833981810160405281019061003191906101a8565b8181815f9081610041919061042b565b508060019081610051919061042b565b50505050506104fa565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6100ba82610074565b810181811067ffffffffffffffff821117156100d9576100d8610084565b5b80604052505050565b5f6100eb61005b565b90506100f782826100b1565b919050565b5f67ffffffffffffffff82111561011657610115610084565b5b61011f82610074565b9050602081019050919050565b8281835e5f83830152505050565b5f61014c610147846100fc565b6100e2565b90508281526020810184848401111561016857610167610070565b5b61017384828561012c565b509392505050565b5f82601f83011261018f5761018e61006c565b5b815161019f84826020860161013a565b91505092915050565b5f80604083850312156101be576101bd610064565b5b5f83015167ffffffffffffffff8111156101db576101da610068565b5b6101e78582860161017b565b925050602083015167ffffffffffffffff81111561020857610207610068565b5b6102148582860161017b565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061026c57607f821691505b60208210810361027f5761027e610228565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026102e17fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826102a6565b6102eb86836102a6565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61032f61032a61032584610303565b61030c565b610303565b9050919050565b5f819050919050565b61034883610315565b61035c61035482610336565b8484546102b2565b825550505050565b5f90565b610370610364565b61037b81848461033f565b505050565b5b8181101561039e576103935f82610368565b600181019050610381565b5050565b601f8211156103e3576103b481610285565b6103bd84610297565b810160208510156103cc578190505b6103e06103d885610297565b830182610380565b50505b505050565b5f82821c905092915050565b5f6104035f19846008026103e8565b1980831691505092915050565b5f61041b83836103f4565b9150826002028217905092915050565b6104348261021e565b67ffffffffffffffff81111561044d5761044c610084565b5b6104578254610255565b6104628282856103a2565b5f60209050601f831160018114610493575f8415610481578287015190505b61048b8582610410565b8655506104f2565b601f1984166104a186610285565b5f5b828110156104c8578489015182556001820191506020850194506020810190506104a3565b868310156104e557848901516104e1601f8916826103f4565b8355505b6001600288020188555050505b505050505050565b611eba806105075f395ff3fe608060405234801561000f575f80fd5b50600436106100e8575f3560e01c80636352211e1161008a578063a22cb46511610064578063a22cb4651461026c578063b88d4fde14610288578063c87b56dd146102a4578063e985e9c5146102d4576100e8565b80636352211e146101ee57806370a082311461021e57806395d89b411461024e576100e8565b8063095ea7b3116100c6578063095ea7b31461016a57806323b872dd1461018657806342842e0e146101a257806354ba0f27146101be576100e8565b806301ffc9a7146100ec57806306fdde031461011c578063081812fc1461013a575b5f80fd5b61010660048036038101906101019190611765565b610304565b60405161011391906117aa565b60405180910390f35b610124610364565b6040516101319190611833565b60405180910390f35b610154600480360381019061014f9190611886565b6103f3565b60405161016191906118f0565b60405180910390f35b610184600480360381019061017f9190611933565b61040e565b005b6101a0600480360381019061019b9190611971565b610424565b005b6101bc60048036038101906101b79190611971565b610523565b005b6101d860048036038101906101d391906119c1565b610542565b6040516101e591906119fb565b60405180910390f35b61020860048036038101906102039190611886565b61056d565b60405161021591906118f0565b60405180910390f35b610238600480360381019061023391906119c1565b61057e565b60405161024591906119fb565b60405180910390f35b610256610634565b6040516102639190611833565b60405180910390f35b61028660048036038101906102819190611a3e565b6106c4565b005b6102a2600480360381019061029d9190611ba8565b6106da565b005b6102be60048036038101906102b99190611886565b6106ff565b6040516102cb9190611833565b60405180910390f35b6102ee60048036038101906102e99190611c28565b61080a565b6040516102fb91906117aa565b60405180910390f35b5f634906490660e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061035d575061035c82610898565b5b9050919050565b60605f805461037290611c93565b80601f016020809104026020016040519081016040528092919081815260200182805461039e90611c93565b80156103e95780601f106103c0576101008083540402835291602001916103e9565b820191905f5260205f20905b8154815290600101906020018083116103cc57829003601f168201915b5050505050905090565b5f6103fd82610979565b50610407826109ff565b9050919050565b610420828261041b610a38565b610a3f565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610494575f6040517f64a0ae9200000000000000000000000000000000000000000000000000000000815260040161048b91906118f0565b60405180910390fd5b5f6104a783836104a2610a38565b610a51565b90508373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161461051d578382826040517f64283d7b00000000000000000000000000000000000000000000000000000000815260040161051493929190611cc3565b60405180910390fd5b50505050565b61053d83838360405180602001604052805f8152506106da565b505050565b5f61054d6007610c5c565b5f6105586007610c70565b90506105648382610c7c565b80915050919050565b5f61057782610979565b9050919050565b5f8073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036105ef575f6040517f89c62b640000000000000000000000000000000000000000000000000000000081526004016105e691906118f0565b60405180910390fd5b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606001805461064390611c93565b80601f016020809104026020016040519081016040528092919081815260200182805461066f90611c93565b80156106ba5780601f10610691576101008083540402835291602001916106ba565b820191905f5260205f20905b81548152906001019060200180831161069d57829003601f168201915b5050505050905090565b6106d66106cf610a38565b8383610d6f565b5050565b6106e5848484610424565b6106f96106f0610a38565b85858585610ed8565b50505050565b606061070a82610979565b505f60065f8481526020019081526020015f20805461072890611c93565b80601f016020809104026020016040519081016040528092919081815260200182805461075490611c93565b801561079f5780601f106107765761010080835404028352916020019161079f565b820191905f5260205f20905b81548152906001019060200180831161078257829003601f168201915b505050505090505f6107af611084565b90505f8151036107c3578192505050610805565b5f825111156107f75780826040516020016107df929190611d32565b60405160208183030381529060405292505050610805565b6108008461109a565b925050505b919050565b5f60055f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16905092915050565b5f7f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061096257507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610972575061097182611100565b5b9050919050565b5f8061098483611169565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036109f657826040517f7e2732890000000000000000000000000000000000000000000000000000000081526004016109ed91906119fb565b60405180910390fd5b80915050919050565b5f60045f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b5f33905090565b610a4c83838360016111a2565b505050565b5f80610a5c84611169565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614610a9d57610a9c818486611361565b5b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610b2857610adc5f855f806111a2565b600160035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825403925050819055505b5f73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614610ba757600160035f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8460025f8681526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4809150509392505050565b6001815f015f828254019250508190555050565b5f815f01549050919050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610cec575f6040517f64a0ae92000000000000000000000000000000000000000000000000000000008152600401610ce391906118f0565b60405180910390fd5b5f610cf883835f610a51565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610d6a575f6040517f73c6ac6e000000000000000000000000000000000000000000000000000000008152600401610d6191906118f0565b60405180910390fd5b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ddf57816040517f5b08ba18000000000000000000000000000000000000000000000000000000008152600401610dd691906118f0565b60405180910390fd5b8060055f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051610ecb91906117aa565b60405180910390a3505050565b5f8373ffffffffffffffffffffffffffffffffffffffff163b111561107d578273ffffffffffffffffffffffffffffffffffffffff1663150b7a02868685856040518563ffffffff1660e01b8152600401610f369493929190611da7565b6020604051808303815f875af1925050508015610f7157506040513d601f19601f82011682018060405250810190610f6e9190611e05565b60015b610ff2573d805f8114610f9f576040519150601f19603f3d011682016040523d82523d5f602084013e610fa4565b606091505b505f815103610fea57836040517f64a0ae92000000000000000000000000000000000000000000000000000000008152600401610fe191906118f0565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161461107b57836040517f64a0ae9200000000000000000000000000000000000000000000000000000000815260040161107291906118f0565b60405180910390fd5b505b5050505050565b606060405180602001604052805f815250905090565b60606110a582610979565b505f6110af611084565b90505f8151116110cd5760405180602001604052805f8152506110f8565b806110d784611424565b6040516020016110e8929190611d32565b6040516020818303038152906040525b915050919050565b5f7f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b5f60025f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b80806111da57505f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614155b1561130c575f6111e984610979565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415801561125357508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b80156112665750611264818461080a565b155b156112a857826040517fa9fbf51f00000000000000000000000000000000000000000000000000000000815260040161129f91906118f0565b60405180910390fd5b811561130a57838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45b505b8360045f8581526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050565b61136c8383836114ee565b61141f575f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036113e057806040517f7e2732890000000000000000000000000000000000000000000000000000000081526004016113d791906119fb565b60405180910390fd5b81816040517f177e802f000000000000000000000000000000000000000000000000000000008152600401611416929190611e30565b60405180910390fd5b505050565b60605f6001611432846115ae565b0190505f8167ffffffffffffffff8111156114505761144f611a84565b5b6040519080825280601f01601f1916602001820160405280156114825781602001600182028036833780820191505090505b5090505f82602001820190505b6001156114e3578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85816114d8576114d7611e57565b5b0494505f850361148f575b819350505050919050565b5f8073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141580156115a557508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614806115665750611565848461080a565b5b806115a457508273ffffffffffffffffffffffffffffffffffffffff1661158c836109ff565b73ffffffffffffffffffffffffffffffffffffffff16145b5b90509392505050565b5f805f90507a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061160a577a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008381611600576115ff611e57565b5b0492506040810190505b6d04ee2d6d415b85acef81000000008310611647576d04ee2d6d415b85acef8100000000838161163d5761163c611e57565b5b0492506020810190505b662386f26fc10000831061167657662386f26fc10000838161166c5761166b611e57565b5b0492506010810190505b6305f5e100831061169f576305f5e100838161169557611694611e57565b5b0492506008810190505b61271083106116c45761271083816116ba576116b9611e57565b5b0492506004810190505b606483106116e757606483816116dd576116dc611e57565b5b0492506002810190505b600a83106116f6576001810190505b80915050919050565b5f604051905090565b5f80fd5b5f80fd5b5f7fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b61174481611710565b811461174e575f80fd5b50565b5f8135905061175f8161173b565b92915050565b5f6020828403121561177a57611779611708565b5b5f61178784828501611751565b91505092915050565b5f8115159050919050565b6117a481611790565b82525050565b5f6020820190506117bd5f83018461179b565b92915050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f611805826117c3565b61180f81856117cd565b935061181f8185602086016117dd565b611828816117eb565b840191505092915050565b5f6020820190508181035f83015261184b81846117fb565b905092915050565b5f819050919050565b61186581611853565b811461186f575f80fd5b50565b5f813590506118808161185c565b92915050565b5f6020828403121561189b5761189a611708565b5b5f6118a884828501611872565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6118da826118b1565b9050919050565b6118ea816118d0565b82525050565b5f6020820190506119035f8301846118e1565b92915050565b611912816118d0565b811461191c575f80fd5b50565b5f8135905061192d81611909565b92915050565b5f806040838503121561194957611948611708565b5b5f6119568582860161191f565b925050602061196785828601611872565b9150509250929050565b5f805f6060848603121561198857611987611708565b5b5f6119958682870161191f565b93505060206119a68682870161191f565b92505060406119b786828701611872565b9150509250925092565b5f602082840312156119d6576119d5611708565b5b5f6119e38482850161191f565b91505092915050565b6119f581611853565b82525050565b5f602082019050611a0e5f8301846119ec565b92915050565b611a1d81611790565b8114611a27575f80fd5b50565b5f81359050611a3881611a14565b92915050565b5f8060408385031215611a5457611a53611708565b5b5f611a618582860161191f565b9250506020611a7285828601611a2a565b9150509250929050565b5f80fd5b5f80fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b611aba826117eb565b810181811067ffffffffffffffff82111715611ad957611ad8611a84565b5b80604052505050565b5f611aeb6116ff565b9050611af78282611ab1565b919050565b5f67ffffffffffffffff821115611b1657611b15611a84565b5b611b1f826117eb565b9050602081019050919050565b828183375f83830152505050565b5f611b4c611b4784611afc565b611ae2565b905082815260208101848484011115611b6857611b67611a80565b5b611b73848285611b2c565b509392505050565b5f82601f830112611b8f57611b8e611a7c565b5b8135611b9f848260208601611b3a565b91505092915050565b5f805f8060808587031215611bc057611bbf611708565b5b5f611bcd8782880161191f565b9450506020611bde8782880161191f565b9350506040611bef87828801611872565b925050606085013567ffffffffffffffff811115611c1057611c0f61170c565b5b611c1c87828801611b7b565b91505092959194509250565b5f8060408385031215611c3e57611c3d611708565b5b5f611c4b8582860161191f565b9250506020611c5c8582860161191f565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680611caa57607f821691505b602082108103611cbd57611cbc611c66565b5b50919050565b5f606082019050611cd65f8301866118e1565b611ce360208301856119ec565b611cf060408301846118e1565b949350505050565b5f81905092915050565b5f611d0c826117c3565b611d168185611cf8565b9350611d268185602086016117dd565b80840191505092915050565b5f611d3d8285611d02565b9150611d498284611d02565b91508190509392505050565b5f81519050919050565b5f82825260208201905092915050565b5f611d7982611d55565b611d838185611d5f565b9350611d938185602086016117dd565b611d9c816117eb565b840191505092915050565b5f608082019050611dba5f8301876118e1565b611dc760208301866118e1565b611dd460408301856119ec565b8181036060830152611de68184611d6f565b905095945050505050565b5f81519050611dff8161173b565b92915050565b5f60208284031215611e1a57611e19611708565b5b5f611e2784828501611df1565b91505092915050565b5f604082019050611e435f8301856118e1565b611e5060208301846119ec565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffdfea2646970667358221220b491ebad6494066044d14b548ff60fe3ffbebb4cab7f7c7a65e4e50a014ead5664736f6c634300081a0033";


const SOMNIA_TESTNET_ID = 50312;
const SOMNIA_RPC_URL = "https://dream-rpc.somnia.network";

const ContractDeployer = () => {
  const [contractType, setContractType] = useState("simple");
  const [name, setName] = useState("");
  const [symbol, setSymbol] = useState("");
  const [supply, setSupply] = useState("");
  const [contractAddress, setContractAddress] = useState("");
  const [loading, setLoading] = useState(false);
  const [walletConnected, setWalletConnected] = useState(false);
  const [userAddress, setUserAddress] = useState("");

  const simpleContractABI = ["constructor()"];
  const tokenContractABI = ["constructor(string name, string symbol, uint256 initialSupply)"];
  const nftContractABI = ["constructor(string collectionName, string symbol)"];

  const connectWallet = async () => {
    if (!window.ethereum) {
      alert("Please connect your Metamask or Web3 wallet!");
      return;
    }

    try {
      // Somnia ağına bağlan
      const connected = await switchToSomnia();
      if (connected) {
        const provider = new ethers.BrowserProvider(window.ethereum);
        const signer = await provider.getSigner();
        const address = await signer.getAddress();
        setUserAddress(address);
        setWalletConnected(true);
      }
    } catch (error) {
      console.error("Error during wallet connection:", error);
    }
  };

  const disconnectWallet = () => {
    setUserAddress("");
    setWalletConnected(false);
  };

  const switchToSomnia = async () => {
    if (!window.ethereum) {
      alert("Metamask Not Found!");
      return false;
    }

    try {
      const currentChainId = await window.ethereum.request({ method: "eth_chainId" });
      if (parseInt(currentChainId, 16) !== SOMNIA_TESTNET_ID) {
        await window.ethereum.request({
          method: "wallet_switchEthereumChain",
          params: [{ chainId: ethers.toBeHex(SOMNIA_TESTNET_ID) }],
        });
      }
      return true;
    } catch (error: any) {
      if (error.code === 4902) {
        try {
          await window.ethereum.request({
            method: "wallet_addEthereumChain",
            params: [
              {
                chainId: ethers.toBeHex(SOMNIA_TESTNET_ID),
                chainName: "Somnia Testnet",
                nativeCurrency: { name: "Ether", symbol: "STT", decimals: 18 },
                rpcUrls: [SOMNIA_RPC_URL],
                blockExplorerUrls: ["https://shannon-explorer.somnia.network"],
              },
            ],
          });
          return true;
        } catch (addError) {
          console.error("Somnia Testnet could not be added:", addError);
          return false;
        }
      } else {
        console.error("Network Switch Failed:", error);
        return false;
      }
    }
  };

  const deployContract = async () => {
    if (!window.ethereum) {
        alert("Please connect your Metamask or Web3 wallet!");
        return;
      }
    
      if (!walletConnected) {
        alert("You cannot deploy the contract without connecting your wallet.");
        return;
      }
      // Somnia ağına geçişi kontrol et
      const isSwitched = await switchToSomnia();
      if (!isSwitched) {
        alert("No transition to Somnia network");
        return;
      }

    const provider = new ethers.BrowserProvider(window.ethereum);
    const signer = await provider.getSigner();
    
    let bytecode;
    let abi;
    let args: any[] = [];
  
    if (contractType === "simple") {
      bytecode = simpleContractBytecode;
      abi = simpleContractABI;
    } else if (contractType === "token") {
      bytecode = tokenContractBytecode;
      if (!name || !symbol || !supply) {
        alert("Please enter all the token details!");
        return;
      }
      args = [name, symbol, ethers.parseUnits(supply, 18)];
      abi = tokenContractABI;
      console.log("Token args:", args);  
      bytecode = nftContractBytecode;
      if (!name || !symbol ) {
        alert("Please enter all the NFT details!");
        return;
      }
      args = [name, symbol];
      abi = nftContractABI;
      console.log("NFT args:", args); 
    }
  
    setLoading(true);
    
    try {
      if (!bytecode || !abi) {
        console.error("Bytecode or ABI is missing! Please ensure they are correctly imported.");
        return;
      }
  
      const factory = new ethers.ContractFactory(abi, bytecode, signer);
      const contract = await factory.deploy(...args);
      await contract.waitForDeployment();
  
      setContractAddress(await contract.getAddress());
    } catch (error) {
      console.error("Deployment failed:", error);
      alert("Deployment failed. Please check the contract parameters.");
    }
  
    setLoading(false);
  };

  return (
    <div className="container">
      <h2 className="title">Somnia Contract Deployer</h2>
      <Analytics />
      {/* Connect / Disconnect Wallet Button */}
      <div className="wallet-connect">
        {walletConnected ? (
          <>
            <p className="wallet-address">Wallet Address: {userAddress}</p>
            <button onClick={disconnectWallet} className="wallet-btn disconnect-btn">Disconnect Wallet</button>
          </>
        ) : (
          <button onClick={connectWallet} className="wallet-btn connect-btn">Connect Wallet</button>
        )}
      </div>
  
      <div className="tabs">
        <button className={contractType === "simple" ? "active" : ""} onClick={() => setContractType("simple")}>
          Simple Contract
        </button>
        <button className={contractType === "token" ? "active" : ""} onClick={() => setContractType("token")}>
          Token Contract
        </button>
        <button className={contractType === "nft" ? "active" : ""} onClick={() => setContractType("nft")}>
          NFT Contract
        </button>
      </div>
  
      {contractType !== "simple" && (
        <div className="form">
          <input placeholder="Name" value={name} onChange={(e) => setName(e.target.value)} />
          <input placeholder="Symbol" value={symbol} onChange={(e) => setSymbol(e.target.value)} />
          {contractType === "token" && (
            <input placeholder="Initial Supply" value={supply} onChange={(e) => setSupply(e.target.value)} />
          )}
        </div>
      )}
  
      <button className="deploy-btn" onClick={deployContract} disabled={loading}>
        {loading ? "Deploying..." : "Deploy Contract"}
      </button>
  
      {contractAddress && (
        <p className="contract-address">
            Done ✅<br></br><br></br>
          Contract Address: <a href={`https://shannon-explorer.somnia.network//address/${contractAddress}`} target="_blank">{contractAddress}</a>
        </p>
      )}
    </div>
  );
};

export default ContractDeployer;
